<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>PrimePicks Links</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<style>
body{font-family:Arial,sans-serif;text-align:center;padding:50px;}
button{margin:10px;padding:15px 25px;font-size:16px;cursor:pointer;}
</style>
</head>
<body>
<h1>PrimePicks Link Tracker</h1>

<button data-linkid="website" data-url="https://primepickstip.onrender.com/">Visit Website</button>
<button data-linkid="apk" data-url="https://median.co/share/rdejjdb#apk">Download APK</button>
<button data-linkid="telegram" data-url="https://t.me/primepicks254">Telegram</button>
<button data-linkid="facebook" data-url="https://www.facebook.com/profile.php?id=61581288185889">Facebook</button>

<script>
(async function(){
const API = "https://YOUR_RENDER_URL.onrender.com/api"; // replace with live Render URL

// get/create userId
let userId = localStorage.getItem("pp_userId");
if(!userId){
  const r = await fetch(API + "/register", {method:"POST"});
  const j = await r.json();
  userId = j.userId;
  localStorage.setItem("pp_userId", userId);
}

// click handler
document.querySelectorAll("button").forEach(btn=>{
  btn.addEventListener("click", async ()=>{
    const linkId = btn.dataset.linkid;
    const linkUrl = btn.dataset.url;

    try{
      const resp = await fetch(API + "/click", {
        method:"POST",
        headers: {"Content-Type":"application/json"},
        body: JSON.stringify({userId, linkId, linkUrl})
      });
      const j = await resp.json();
      console.log("Click response:", j);
      window.open(linkUrl,"_blank");
    }catch(err){ console.error(err); }
  });
});
})();
</script>
</body>
</html>
